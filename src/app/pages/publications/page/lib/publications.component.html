<fp-container>
  <fp-breadcrumbs [items]="items" />
  <fp-page-title [title]="title" />

  <div class="flex flex-col tablet:flex-row desktop:flex-row gap-10">
    <div class="tablet:w-2/3 desktop:w-2/3 flex flex-col">
      <div class="flex flex-col tablet:flex-row desktop:flex-row flex-wrap gap-3 my-8">
        @for (cat of categories(); track cat.id) {
          <fp-plain-button
            [label]="cat.title"
            className="{{
              cat.isActive
                ? 'bg-orange text-white hover:bg-active-orange border-orange hover:border-active-orange'
                : 'text-orange bg-transparent hover:border-orange'
            }}  border border-grey-strok"
            (click)="handleSortBtn(cat.id)"
          />
        } @empty {
          <p>Загружается...</p>
        }
      </div>
      <div class="mb-16 flex flex-col gap-6">
        @for (post of posts(); track post.id) {
          <ng-container
            *ngTemplateOutlet="
              publicationsPost;
              context: {
                $implicit: post.title,
                section: post.tags[0],
                subtitle: post.subtitle,
                image: post.image || 'https://placehold.co/600x400',
                date: post.created_at,
              }
            "
          />
        } @empty {
          <p>Загружается...</p>
        }
      </div>
    </div>
  </div>
</fp-container>

<ng-template #publicationsPost let-title let-date="date" let-tag="tag" let-subtitle="subtitle" let-image="image">
  <div class="bg-white flex flex-col pb-10">
    <div class="h-[239px] w-full relative mb-4">
      <img [ngSrc]="image" alt="search result" class="object-cover" fill priority />
    </div>
    <div class="flex items-center gap-5 mb-4">
      <span class="grid place-items-center w-[108px] h-[34px] bg-orange text-bkgrnd">{{ date }}</span>
      <span class="text-orange text-md">{{ tag }}</span>
    </div>
    <h4 class="font-semibold text-[23px] leading-tight mb-5">{{ title }}</h4>
    <p class="text-md leading-normal">{{ subtitle }}</p>
  </div>
</ng-template>
